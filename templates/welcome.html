<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forest Path Career Quiz</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.10.2/lottie.min.js"></script>
</head>
<body>

<div class="forest-overlay"></div>
<div class="firefly"></div>
<div class="firefly"></div>
<div class="firefly"></div>
<div class="firefly"></div>
<div class="firefly"></div>

<div class="container">
  <header id="hero-header">
    <h1>🌳 Welcome to the Forest Path Career Quiz 🌍</h1>
    <p class="tagline">Get ready to explore the wonders of the world — with your chosen pet companion and nickname!</p>
  </header>

  <main>
    <p class="intro">Before we begin your career adventure through breathtaking destinations like the Aurora skies and ancient temples, tell us more about you:</p>

    <div class="nickname-input">
      <label for="nickname">Choose your nickname:</label>
      <input type="text" id="nickname" placeholder="e.g. Explorer123">
    </div>

    <h2 class="choose-title">Choose Your Travel Pet 🐾</h2>
    <div class="pet-selection">
      <div class="pet-option" data-pet="penguin">
        <div class="lottie" id="penguin-animation"></div>
        <p>Penguin</p>
      </div>
      <div class="pet-option" data-pet="panda">
        <div class="lottie" id="panda-animation"></div>
        <p>Panda</p>
      </div>
      <div class="pet-option" data-pet="puppy">
        <div class="lottie" id="puppy-animation"></div>
        <p>Puppy</p>
      </div>
      <div class="pet-option" data-pet="bat">
        <div class="lottie" id="bat-animation"></div>
        <p>Bat</p>
      </div>
    </div>

    <a href="{{ url_for('quiz') }}" class="start-button" id="start-btn" style="display:none;">Start the Journey</a>
  </main>

  <footer>
    <p>&copy; 2025 Forest Career Quest | Crafted with ❤️ by Rahul</p>
  </footer>
</div>

<script>
  const loadLottie = (id, path) => {
    lottie.loadAnimation({
      container: document.getElementById(id),
      renderer: 'svg',
      loop: true,
      autoplay: true,
      path: path
    });
  };

  window.addEventListener("load", () => {
    gsap.from("#hero-header", {
      opacity: 0,
      y: -50,
      duration: 1.2,
      ease: "power2.out"
    });

    gsap.from(".intro", {
      opacity: 0,
      y: 30,
      duration: 1,
      delay: 0.5,
      ease: "power1.out"
    });

    gsap.from(".start-button", {
      scale: 0,
      duration: 0.8,
      delay: 1,
      ease: "back.out(1.7)"
    });

    gsap.to(".firefly", {
      x: () => Math.random() * 100 - 50,
      y: () => Math.random() * 100 - 50,
      repeat: -1,
      yoyo: true,
      duration: 3,
      ease: "sine.inOut"
    });

    loadLottie("penguin-animation", "{{ url_for('static', filename='lottie/penguin.json') }}");
    loadLottie("panda-animation", "{{ url_for('static', filename='lottie/panda.json') }}");
    loadLottie("puppy-animation", "{{ url_for('static', filename='lottie/puppy.json') }}");
    loadLottie("bat-animation", "{{ url_for('static', filename='lottie/bat.json') }}");
  });

  const pets = document.querySelectorAll('.pet-option');
  const startBtn = document.getElementById('start-btn');
  const nicknameInput = document.getElementById('nickname');

  pets.forEach(pet => {
    pet.addEventListener('click', () => {
      pets.forEach(p => p.classList.remove('selected'));
      pet.classList.add('selected');
      localStorage.setItem('selectedPet', pet.dataset.pet);
      if (nicknameInput.value.trim()) startBtn.style.display = 'inline-block';
    });
  });

  nicknameInput.addEventListener('input', () => {
    localStorage.setItem('nickname', nicknameInput.value.trim());
    if (document.querySelector('.pet-option.selected') && nicknameInput.value.trim()) {
      startBtn.style.display = 'inline-block';
    } else {
      startBtn.style.display = 'none';
    }
  });
</script>

</body>
</html>
